<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Basic zoon usage • zoon R package</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="Basic zoon usage">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">zoon</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic-zoon-usage.html">Basic zoon usage</a>
    </li>
    <li>
      <a href="../articles/Building_a_module.html">Building modules</a>
    </li>
    <li>
      <a href="../articles/interactive_zoon_usage.html">Interactive zoon usage (for developers)</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/zoonproject/zoon">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Basic zoon usage</h1>
                        <h4 class="author">Tim Lucas and Tom August</h4>
            
            <h4 class="date">2016-11-23</h4>
          </div>

    
    
<div class="contents">
<div id="an-introduction-to-the-zoon-package" class="section level2">
<h2 class="hasAnchor">
<a href="#an-introduction-to-the-zoon-package" class="anchor"></a>An Introduction to the <code>zoon</code> package</h2>
<p><code>zoon</code> is a package to aid reproducibility and between-model comparisons in species distribution modelling. Each step in an analysis is a ‘module’. These modules will include:</p>
<ul>
<li>Data collections of <em>occurrence</em> and environmental <em>covariate</em> data from online databases or local files.</li>
<li>
<em>Process</em> steps such as removal of spatial autocorrelation in the data or generation of background pseudoabsences.</li>
<li>The fitting of <em>models</em>.</li>
<li>Model <em>output</em> including diagnostics, reports and vizualisation.</li>
</ul>
<hr>
</div>
<div id="getting-set-up" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-set-up" class="anchor"></a>Getting set up</h2>
<p><code>zoon</code> is on CRAN and can be installed like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">'zoon'</span>)</code></pre></div>
<p>Alternatively you can install the most up to date development version of <code>zoon</code> from Github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">'zoonproject/zoon'</span>)</code></pre></div>
<p>Then load the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(zoon)</code></pre></div>
<hr>
</div>
<div id="basic-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-usage" class="anchor"></a>Basic usage</h2>
<p>A basic worklow is run using the <code>workflow()</code> function. We must chose a module for each type: occurrence, covariate, process, model and output.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work1 &lt;-<span class="st"> </span><span class="kw">workflow</span>(<span class="dt">occurrence =</span> UKAnophelesPlumbeus,
                  <span class="dt">covariate  =</span> UKAir,
                  <span class="dt">process    =</span> OneHundredBackground,
                  <span class="dt">model      =</span> RandomForest,
                  <span class="dt">output     =</span> PrintMap)</code></pre></div>
<p><img src="basic_5-1.png" title="plot of chunk basic_5" alt="plot of chunk basic_5" style="display:block; margin: auto"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(work1)</code></pre></div>
<pre><code>## [1] "zoonWorkflow"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(work1, <span class="dv">1</span>)</code></pre></div>
<pre><code>## List of 9
##  $ occurrence.output:List of 1
##  $ covariate.output :List of 1
##  $ process.output   :List of 1
##  $ model.output     :List of 1
##  $ report           :List of 1
##  $ call             : chr "workflow(occurrence = UKAnophelesPlumbeus, covariate = UKAir, process = OneHundredBackground, model = RandomForest, output = Pr"| __truncated__
##  $ call.list        :List of 5
##  $ session.info     :List of 7
##   ..- attr(*, "class")= chr "sessionInfo"
##  $ module.versions  :List of 5
##  - attr(*, "class")= chr "zoonWorkflow"</code></pre>
<p>In this case we are using the following modules which do the following things:</p>
<ul>
<li>
<code>UKAnophelesPlumbeus</code>: Uses occurrence points of <em>Anopheles plumbeus</em> in the UK collected from GBIF</li>
<li>
<code>UKAir</code>: Uses NCEP air temperature data for the UK</li>
<li>
<code>OneHundredBackground</code>: Randomly creates 100 pseudoabsence or background datapoints</li>
<li>
<code>RandomForest</code>: Run a random forest to model the relationship between <em>Anopheles plumbeus</em> and air temperature</li>
<li>
<code>PrintMap</code>: Predicts the model across the whole of the covariate dataset (<code>UKAir</code> in this case) and prints to graphics device.</li>
</ul>
<p>The object returned from the <code>workflow</code> function (<code>work1</code> in the above example) is an object of class <code>zoonWorkflow</code>. This object is a <code>list</code> with all the data, models and output we collected and created in our analysis.</p>
<p>To access the output of a particular part of the workflow you can use the accessor functions which have the same names as the module types. For example if you want the data returned from the occurrence module you can use the <code>Occurrence()</code> accessor function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Use the Occurrence function to get occurrence module</span>
<span class="co"># output from the workflow object</span>

occ_out &lt;-<span class="st"> </span><span class="kw">Occurrence</span>(work1)

<span class="kw">head</span>(occ_out)</code></pre></div>
<pre><code>##     longitude latitude value     type fold
## 1  1.01287600 52.37696     1 presence    1
## 2 -0.16003467 51.57146     1 presence    1
## 3 -2.83497900 53.40813     1 presence    1
## 4 -0.62955210 51.55540     1 presence    1
## 5 -3.52534680 56.04848     1 presence    1
## 6  0.01144066 51.58168     1 presence    1</code></pre>
<p>To find out more about the elements returned from each module there is a summary at the start of the ‘Building a Module’ vignette. In this instance a <code>data.frame</code> is returned showing all of the occurrence data that is returned by the occurrence module.</p>
<hr>
</div>
<div id="getting-help" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-help" class="anchor"></a>Getting Help</h2>
<p>To find a list of modules available on the online repository use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GetModuleList</span>()</code></pre></div>
<p>To find help on a specific module use</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ModuleHelp</span>(LogisticRegression)</code></pre></div>
<p>Note that you can’t use <code>?</code> as the modules are held on a repository. Therefore the module documentation files are not included with the basic <code>zoon</code> install.</p>
<p>If you have used <code>zoon</code> in a publication you will need to cite <code>zoon</code> and the modules you have used. There are two different functions for doing this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># For the zoon package</span>

<span class="kw">citation</span>(<span class="st">'zoon'</span>)

<span class="co"># For zoon modules</span>

<span class="kw">ZoonCitation</span>(<span class="st">'OptGRaF'</span>)</code></pre></div>
<hr>
</div>
<div id="more-complex-analyses" class="section level2">
<h2 class="hasAnchor">
<a href="#more-complex-analyses" class="anchor"></a>More complex analyses</h2>
<p>The syntax for including arguments to modules is simply <code>ModuleName(parameter = 'value')</code> like a standard function call in R. For example, to do two-fold crossvalidation we do:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work2 &lt;-<span class="st"> </span><span class="kw">workflow</span>(<span class="dt">occurrence =</span> UKAnophelesPlumbeus,
                  <span class="dt">covariate  =</span> UKAir,
                  <span class="dt">process    =</span> <span class="kw">BackgroundAndCrossvalid</span>(<span class="dt">k =</span> <span class="dv">2</span>),
                  <span class="dt">model      =</span> LogisticRegression,
                  <span class="dt">output     =</span> PerformanceMeasures)</code></pre></div>
<pre><code>## Occurrence data does not have a "crs" column, zoon will assume it is in the same projection as the covariate data</code></pre>
<pre><code>## There are fewer than 100 cells in the environmental raster.
## Using all available cells (81) instead</code></pre>
<pre><code>## Loading required package: SDMTools</code></pre>
<pre><code>## 
## Attaching package: 'SDMTools'</code></pre>
<pre><code>## The following object is masked from 'package:raster':
## 
##     distance</code></pre>
<p>Here we are providing an argument to the module <code>BackgroundAndCrossvalid</code>. We are setting <code>k</code> (the number of cross validation folds) to 2.</p>
<p>We are using an output module <code>PerformanceMeasures</code> which calculates a number of measures of the effectiveness of our model: AUC, kappa, sensitivity, specificity etc.</p>
<div id="multiple-modules-with-chain" class="section level3">
<h3 class="hasAnchor">
<a href="#multiple-modules-with-chain" class="anchor"></a>Multiple modules with Chain</h3>
<p>We might want to combine multiple modules in our analysis. For this we use the function <code>Chain()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work3 &lt;-<span class="st"> </span><span class="kw">workflow</span>(<span class="dt">occurrence =</span> UKAnophelesPlumbeus,
                  <span class="dt">covariate  =</span> UKAir,
                  <span class="dt">process    =</span> <span class="kw">Chain</span>(OneHundredBackground, Crossvalidate),
                  <span class="dt">model      =</span> LogisticRegression,
                  <span class="dt">output     =</span> PerformanceMeasures)</code></pre></div>
<pre><code>## Occurrence data does not have a "crs" column, zoon will assume it is in the same projection as the covariate data</code></pre>
<pre><code>## There are fewer than 100 cells in the environmental raster.
## Using all available cells (81) instead</code></pre>
<p>Here we draw some pseudoabsence background points, and do crossvalidation (which is the same as <code>work2</code>, but explicitely using the separate modules.)</p>
<p>The effect of <code>Chain()</code> depends on the module type:</p>
<ul>
<li>
<code>occurrence</code>: All data from chained modules are combined.</li>
<li>
<code>covariate</code>: All raster data from chained modules are stacked.</li>
<li>
<code>process</code>: The processes are run sequentially, the output of one going into the next.</li>
<li>
<code>model</code>: Model modules cannot be chained.</li>
<li>
<code>output</code>: Each output module that is chained is run separately on the output from the other modules.</li>
</ul>
<p><code>Chain()</code> can be used on as many module type as is required.</p>
</div>
<div id="multiple-modules-with-list" class="section level3">
<h3 class="hasAnchor">
<a href="#multiple-modules-with-list" class="anchor"></a>Multiple modules with list</h3>
<p>If you want to run separate analyses that can then be compared for example, specifiy a <code>list</code> of modules.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work4 &lt;-<span class="st"> </span><span class="kw">workflow</span>(<span class="dt">occurrence =</span> UKAnophelesPlumbeus,
                  <span class="dt">covariate  =</span> UKAir,
                  <span class="dt">process    =</span> OneHundredBackground,
                  <span class="dt">model      =</span> <span class="kw">list</span>(LogisticRegression, RandomForest),
                  <span class="dt">output     =</span> PrintMap)</code></pre></div>
<pre><code>## Occurrence data does not have a "crs" column, zoon will assume it is in the same projection as the covariate data</code></pre>
<pre><code>## There are fewer than 100 cells in the environmental raster.
## Using all available cells (81) instead</code></pre>
<p><img src="basic_11-1.png" title="plot of chunk basic_11" alt="plot of chunk basic_11" style="display:block; margin: auto"><img src="basic_11-2.png" title="plot of chunk basic_11" alt="plot of chunk basic_11" style="display:block; margin: auto"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(work4, <span class="dv">1</span>)</code></pre></div>
<pre><code>## List of 9
##  $ occurrence.output:List of 1
##  $ covariate.output :List of 1
##  $ process.output   :List of 1
##  $ model.output     :List of 2
##  $ report           :List of 2
##  $ call             : chr "workflow(occurrence = UKAnophelesPlumbeus, covariate = UKAir, process = OneHundredBackground, model = list(LogisticRegression, "| __truncated__
##  $ call.list        :List of 5
##  $ session.info     :List of 7
##   ..- attr(*, "class")= chr "sessionInfo"
##  $ module.versions  :List of 5
##  - attr(*, "class")= chr "zoonWorkflow"</code></pre>
<p>Here, the analysis is split into two and both logistic regression and random forest (a machine learning algorithm) are used to model the data. Looking at the structure of the output we can see that the output from the first three modules are a list of length one. When the analysis splits into two, the output of the modules (in <code>work4$model.output</code> and <code>work4$report</code>) is then a list of length two. One for each branch of the split analysis.</p>
</div>
<div id="repeating-a-module-multiple-times" class="section level3">
<h3 class="hasAnchor">
<a href="#repeating-a-module-multiple-times" class="anchor"></a>Repeating a module multiple times</h3>
<p>If you want to repeat a module multiple times you can use <code>Replicate()</code>. This can be useful when using modules that have a random process such as the creation of pseudoabsences.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work5 &lt;-<span class="st"> </span><span class="kw">workflow</span>(<span class="dt">occurrence =</span> UKAnophelesPlumbeus,
                  <span class="dt">covariate  =</span> UKAir,
                  <span class="dt">process    =</span> <span class="kw">Replicate</span>(<span class="kw">Background</span>(<span class="dt">n =</span> <span class="dv">20</span>), <span class="dt">n =</span> <span class="dv">3</span>),
                  <span class="dt">model      =</span> RandomForest,
                  <span class="dt">output     =</span> PrintMap)</code></pre></div>
<pre><code>## Occurrence data does not have a "crs" column, zoon will assume it is in the same projection as the covariate data</code></pre>
<p><img src="basic_12-1.png" title="plot of chunk basic_12" alt="plot of chunk basic_12" style="display:block; margin: auto"><img src="basic_12-2.png" title="plot of chunk basic_12" alt="plot of chunk basic_12" style="display:block; margin: auto"><img src="basic_12-3.png" title="plot of chunk basic_12" alt="plot of chunk basic_12" style="display:block; margin: auto"></p>
<p><code>Replicate()</code> takes as its first argument the module you want to repeat and as its second argument the number of times yo want to repeat it. Here we end up running our model three times for three different sets out background points</p>
</div>
<div id="auxillary-information-in-a-zoonworkflow" class="section level3">
<h3 class="hasAnchor">
<a href="#auxillary-information-in-a-zoonworkflow" class="anchor"></a>Auxillary information in a ZoonWorkflow</h3>
<p>A <code>ZoonWorkflow</code> object (such as <code>work5</code> above), has a number of auxillary elements to help you interpret its contents.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># call gives the R call used to create the workflow</span>

work5$call</code></pre></div>
<pre><code>## [1] "workflow(occurrence = UKAnophelesPlumbeus, covariate = UKAir, process = Replicate(Background(n = 20), n = 3), model = RandomForest, output = PrintMap, forceReproducible = FALSE)"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># session.info gives the session info when the </span>
<span class="co"># workflow was created</span>

work5$session.info</code></pre></div>
<pre><code>## R version 3.3.2 (2016-10-31)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 7 x64 (build 7601) Service Pack 1
## 
## locale:
## [1] LC_COLLATE=English_United Kingdom.1252 
## [2] LC_CTYPE=English_United Kingdom.1252   
## [3] LC_MONETARY=English_United Kingdom.1252
## [4] LC_NUMERIC=C                           
## [5] LC_TIME=English_United Kingdom.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] SDMTools_1.1-221    randomForest_4.6-12 dismo_1.1-1        
## [4] zoon_0.5.3          raster_2.5-8        sp_1.2-3           
## [7] knitr_1.15         
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_0.12.7       magrittr_1.5      roxygen2_5.0.1   
##  [4] munsell_0.4.3     colorspace_1.3-0  lattice_0.20-34  
##  [7] R6_2.2.0          highr_0.6         httr_1.2.1       
## [10] stringr_1.1.0     plyr_1.8.4        tools_3.3.2      
## [13] rgdal_1.2-4       grid_3.3.2        gtable_0.2.0     
## [16] R.oo_1.21.0       assertthat_0.1    lazyeval_0.2.0   
## [19] yaml_2.1.14       tibble_1.2        rfigshare_0.3.7  
## [22] crayon_1.3.2      RJSONIO_1.3-0     ggplot2_2.2.0    
## [25] R.utils_2.5.0     bitops_1.0-6      RCurl_1.95-4.8   
## [28] testthat_1.0.2    evaluate_0.10     stringi_1.1.2    
## [31] scales_0.4.1      R.methodsS3_1.7.1 XML_3.98-1.5     
## [34] httpuv_1.3.3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># module versions lists the modules used at each</span>
<span class="co"># step and which version number they were</span>

work5$module.versions</code></pre></div>
<pre><code>## $occurrence
##         [,1]                 
## module  "UKAnophelesPlumbeus"
## version "1.0"                
## 
## $covariate
##         [,1]   
## module  "UKAir"
## version "1.0"  
## 
## $process
##         [,1]         [,2]         [,3]        
## module  "Background" "Background" "Background"
## version "1.1"        "1.1"        "1.1"       
## 
## $model
##         [,1]          
## module  "RandomForest"
## version "1.0"         
## 
## $output
##         [,1]      
## module  "PrintMap"
## version "1.1"</code></pre>
<p>When using lists in a workflow (as in <code>work4</code> above) the workflow becomes forked. For example when <code>work4</code> was created two models where run leading to two output maps. We can easily trace back the origins of any module output using the attribute <code>call_path</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># work4 has two output maps, find the origins of the first</span>
<span class="co"># using the Output accessor function and the call_path</span>
<span class="co"># attribute</span>

<span class="kw">attr</span>(<span class="kw">Output</span>(work4)[[<span class="dv">1</span>]], <span class="dt">which =</span> <span class="st">'call_path'</span>)</code></pre></div>
<pre><code>## $occurrence
## [1] "UKAnophelesPlumbeus"
## 
## $covariate
## [1] "UKAir"
## 
## $process
## [1] "OneHundredBackground"
## 
## $model
## [1] "LogisticRegression"
## 
## $output
## [1] "PrintMap"</code></pre>
</div>
<div id="a-larger-example" class="section level3">
<h3 class="hasAnchor">
<a href="#a-larger-example" class="anchor"></a>A larger example</h3>
<p>Here is an example of a larger analysis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work6 &lt;-<span class="st"> </span><span class="kw">workflow</span>(<span class="dt">occurrence =</span> <span class="kw">Chain</span>(<span class="kw">SpOcc</span>(<span class="dt">species =</span> <span class="st">'Eresus kollari'</span>, 
                                       <span class="dt">extent =</span> <span class="kw">c</span>(-<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">45</span>, <span class="dv">65</span>)),
                                     <span class="kw">SpOcc</span>(<span class="dt">species =</span> <span class="st">'Eresus sandaliatus'</span>, 
                                       <span class="dt">extent =</span> <span class="kw">c</span>(-<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">45</span>, <span class="dv">65</span>))),
                  <span class="dt">covariate =</span> UKAir,
                  <span class="dt">process =</span> <span class="kw">BackgroundAndCrossvalid</span>(<span class="dt">k =</span> <span class="dv">2</span>),
                  <span class="dt">model =</span> <span class="kw">list</span>(LogisticRegression,
                               RandomForest),
                  <span class="dt">output =</span> <span class="kw">Chain</span>(<span class="kw">PrintMap</span>(<span class="dt">plot =</span> <span class="ot">FALSE</span>),
                                 PerformanceMeasures)
         )</code></pre></div>
<pre><code>## Loading required package: MASS</code></pre>
<pre><code>## 
## Attaching package: 'MASS'</code></pre>
<pre><code>## The following objects are masked from 'package:raster':
## 
##     area, select</code></pre>
<pre><code>## Loading required package: spocc</code></pre>
<pre><code>## Occurrence data does not have a "crs" column, zoon will assume it is in the same projection as the covariate data</code></pre>
<pre><code>## There are fewer than 100 cells in the environmental raster.
## Using all available cells (81) instead</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Take a look at the structure of the workflow object</span>

<span class="kw">str</span>(work6, <span class="dv">1</span>)</code></pre></div>
<pre><code>## List of 9
##  $ occurrence.output:List of 1
##  $ covariate.output :List of 1
##  $ process.output   :List of 1
##  $ model.output     :List of 2
##  $ report           :List of 4
##  $ call             : chr "workflow(occurrence = Chain(SpOcc(species = \"Eresus kollari\", extent = c(-10, 10, 45,      65)), SpOcc(species = \"Eresus san"| __truncated__
##  $ call.list        :List of 5
##  $ session.info     :List of 7
##   ..- attr(*, "class")= chr "sessionInfo"
##  $ module.versions  :List of 5
##  - attr(*, "class")= chr "zoonWorkflow"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create some custom plots using the raster returned from </span>
<span class="co"># the output module</span>

<span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">4</span>))

<span class="kw">plot</span>(<span class="kw">Output</span>(work6)[[<span class="dv">1</span>]], 
     <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">'Logistic Regression: AUC = '</span>, 
             <span class="kw">round</span>(<span class="kw">Output</span>(work6)[[<span class="dv">2</span>]]$auc, <span class="dv">2</span>)),
     <span class="dt">xlim =</span> <span class="kw">c</span>(-<span class="dv">10</span>, <span class="dv">10</span>))

<span class="kw">plot</span>(<span class="kw">Output</span>(work6)[[<span class="dv">3</span>]],
  <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">'Random forest: AUC = '</span>, 
             <span class="kw">round</span>(<span class="kw">Output</span>(work6)[[<span class="dv">4</span>]]$auc, <span class="dv">2</span>)))</code></pre></div>
<p><img src="basic_15-1.png" title="plot of chunk basic_15" alt="plot of chunk basic_15" style="display:block; margin: auto"></p>
<p>Here we are collecting occurrence data for two species, <em>Eresus kollari</em> and <em>Eresus sandaliatus</em> and combining them (having presumably decided that this is ecologically appropriate). We are using the air temperature data from NCEP again. We are sampling 100 pseudo absence points and running two fold crossvalidation.</p>
<p>We run logistic regression and random forest on the data separately. We then predict the model back over the extent of our environmental data and calculate some measures of how good the models are. Collating the output into one plot we can see the very different forms of the models and can see that the random forest has a higher AUC (implying it predicts the data better).</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#an-introduction-to-the-zoon-package">An Introduction to the <code>zoon</code> package</a></li>
      <li><a href="#getting-set-up">Getting set up</a></li>
      <li><a href="#basic-usage">Basic usage</a></li>
      <li><a href="#getting-help">Getting Help</a></li>
      <li><a href="#more-complex-analyses">More complex analyses</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Tom August, Tim Lucas, Nick Golding, Greg McInerny.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
